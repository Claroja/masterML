<html>
<style>
.axis path,
.axis line{
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
}
.axis text {
    font-family: sans-serif;
    font-size: 11px;
}

svg {
	display:inline-block;
}
</style>
    <body>
			<svg id=zero width=300 height =300 ></svg>
			<svg id=first width=300 height =300 ></svg>
        <script src="http://d3js.org/d3.v3.min.js"></script>
        <script>
					svg =	d3.select("svg[id=zero]")
					var xlinear = d3.scale.linear()
									.domain([-100, 100])
									.range([0, 300]);
					var ylinear = d3.scale.linear()
									.domain([0, 32000])
									.range([250, 0]);
					var xaxis = d3.svg.axis()
											.scale(xlinear)      //指定比例尺
											.orient("bottom")   //指定刻度的方向
											.ticks(10);          //指定刻度的数量
					var yaxis = d3.svg.axis()
											.scale(ylinear)
											.orient("left")
											.ticks(5);
					svg.append("g")
							.attr("class","axis")
							.attr("transform","translate(0,250)")  //x轴上下平移不会对坐标系造成影响
							.call(xaxis);
					svg.append("g")
							.attr("class","axis")
							.attr("transform","translate(150,0)")  //y轴左右平移不会对坐标系造成影响
							.call(yaxis);
							
					d3.json("test.json", function(json){
						var line = svg.selectAll("line[new]")
						.data(json)
						.enter()
						.append('line')
						.attr('x1', (d)=>xlinear(d.x1))
						.attr('y1', (d)=>ylinear(d.y1))
						.attr('x2', (d)=>xlinear(d.x2))
						.attr('y2', (d)=>ylinear(d.y2))
						.attr("class","new")
						.attr('stroke','black')
					});

					svg1 = d3.select("svg[id=first]")
					var x1linear = d3.scale.linear()
									.domain([-10, 10])
									.range([0, 300]);
					var y1linear = d3.scale.linear()
									.domain([0, 10])
									.range([250, 0]);
					var x1axis = d3.svg.axis()
											.scale(x1linear)      //指定比例尺
											.orient("bottom")   //指定刻度的方向
											.ticks(10);          //指定刻度的数量
					var y1axis = d3.svg.axis()
											.scale(y1linear)
											.orient("left")
											.ticks(5);
					var circle_data=[[1,2],[3,1],[3,3]];
					svg1.selectAll("circle")
						.data(circle_data)
						.enter()
						.append("circle")
						.attr({
							cx:(d)=>x1linear(d[0]),
							cy:(d)=>y1linear(d[1]),
							r:2,
						});
					svg1.append("g")
							.attr("class","axis")
							.attr("transform","translate(0,250)")  //x轴上下平移不会对坐标系造成影响
							.call(x1axis);
					svg1.append("g")
							.attr("class","axis")
							.attr("transform","translate(150,0)")  //y轴左右平移不会对坐标系造成影响
							.call(y1axis);
					
					d3.json("test1.json", function(json){
						var testdata=json.reverse();
						svg.on("mousedown",function(){
							data = testdata.pop()
							console.log(data)
							svg.append('circle')
							.attr('cx',xlinear(data.cx))
							.attr('cy',ylinear(data.cy))
							.attr('r',2);
							svg1.select("line[class = temp]").remove();
							svg1.append("line")
							.attr({
								x1:x1linear(0),
								y1:y1linear(0),
								x2:x1linear(10),
								y2:y1linear(data.cx*10),
								stroke:"black",
								class:"temp",
							})
						});
					});	
        </script>
    </body>
</html>