<html>
<style>
.axis path,
.axis line{
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
}
.axis text {
    font-family: sans-serif;
    font-size: 11px;
}

svg {
	display:inline-block;
}
</style>
    <body>
	<svg id=zero width=300 height =300 ></svg>
        <script src="https://cdn.bootcss.com/d3/3.5.17/d3.min.js"></script>
	<script src="../share/axis.js"></script>
        <script>
		x=d3.range(-100,100)
		y=x.map(x=>0.01*x*x)
		data = d3.zip(x,y)
		svg =	d3.select("svg[id=zero]")  //损失函数坐标系
		xdomain = [-100,100]
		ydomain = [-10,100]
		temp= axix(svg,xdomain,ydomain)
		xlinear = temp[0]
		ylinear =temp[1]

		var lineGen = d3.svg.line()
		  .x(function(d) {
		    return xlinear(d[0]);
		  })
		  .y(function(d) {
		    return ylinear(d[1]);
		  });
		  
		  
		svg.append('svg:path')
		  .attr('d', lineGen(data))
		  .attr('stroke', 'green')
		  .attr('stroke-width', 2)
		  .attr('fill', 'none');				
		
		svg.append('circle')
			.attr({
			cx:xlinear(60),
			cy:ylinear(60),
			r:2,
			});
		
// 		var line = svg.selectAll("line[new]")
// 		.data(json)
// 		.enter()
// 		.append('line')
// 		.attr('x1', (d)=>xlinear(d.x1))
// 		.attr('y1', (d)=>ylinear(d.y1))
// 		.attr('x2', (d)=>xlinear(d.x2))
// 		.attr('y2', (d)=>ylinear(d.y2))
// 		.attr("class","new")
// 		.attr('stroke','black')
			
  //点击 观察拟合直线和损失函数的关系
		svg.on("mousedown",function(){
			data = testdata.pop()
			console.log(data)
			svg.append('circle')
			.attr('cx',xlinear(data.cx))
			.attr('cy',ylinear(data.cy))
			.attr('r',2);
			})	
        </script>
    </body>
</html>